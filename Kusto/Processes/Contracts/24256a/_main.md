[🏠 Головна](../../../README.MD) / [⚙️ Бізнес-процеси](../../README.MD) / ⚙️ Погодження договору


# `🚧 Процес #17` ⚙️ Погодження договору

## Короткий опис процесу

- [ ] Процес призначений для погодження договорів та специфікацій. Він може бути використаний для одночасного погодження декількох однотиних договорів з одним контрагентом (між вказаним котрагентом та декількома нашими компаніями).

- [ ] Після завершення процесу тільки погоджені договори (та/або специфікації) можуть бути обрані для використання; не погодженні користувач обрати не може (в інших процесах).

- [ ] Даному процесу передує процес [`⚙️ Задача юристу`](../16/README.MD) в якому продукується об'єкт [`📘 Задача юристу`](../../../Entities/TaskToLawyer.md), що містить інформацію про договір (та / або специфікацію) що потрібно запустити на погодження, цей об'єкт необхідно обв'язково вказати при старті процесу, або ж процес автоматично запуститься після процесу [⚙️ Задача юристу](../16/README.MD).

## Вимоги до процесу

- [ ] Після запуску процесу в контекст процесу копіюється інформація з об'єкту [📘 Задача юристу](../../../Entities/TaskToLawyer.md) та далі відображається на формі у юриста `Z10T10`. Більшість скопійованих значень доступні для редагування, інформація яку надав ініціатор - ні.

- [ ] Після запуску процесу в контекст процесу завантажується `📘 Об'єкт конфігурації процесу`, з якого вході перебігу процесу будуть читатись різноманітні його налаштування.

- [ ] Якщо було вказано декілька наших компаній - далі буде запущено декілька підпроцесів безпосереднього погодження (у  зоні `Z20`).

- [ ] Юрист може запустити на погодження договір, специфікацію, та одночасно і договір і специфікацію (в залежності від того як вказав ініціатор), але не може обирати сам.

- [ ] В залежності від того що саме запускає юрист (договір та/або специфікацію) на формі його задачі з'являються або приховуються, стають опціональними або необхідними для заповнення відповідні поля.

- [ ] Після того як юрист вніс всю необхідну інформцію і натиснув кнопку запуску погодження перед ним постає модальне діалогове вікно в якому він може переглянути перелік учасників погодження (та у випадку необхідності звернутись до адміністратора для їх коригування). Учасники погодження читаються із `📘 Об'єкт конфігурації процесу` та/або об'єкту `📘 Тип і підстава договору`

- [ ] Після завершення роботи юристом запускаються підпроцеси (у випадку декількох наших компаній) або підпроцес (якщо одна) в яких відбувається безпосереднє погодження договору/специфікації.

- [ ] У випадку негативного рішення погодження процес повертається на коригування юристу. Юрист може відправити договір/специфікацію на повне перепогодження, або ж тільки тим учасникам, що не погодили, рішення що обрати він приймає сам.

- [ ] На формі коригування юрист може внести:
	- Примітки
	- Вкладення
	- Вкладення з документами
	- Оновити версію договору та/або специфікації
	- Додати нового учасника погодження

- [ ] Результат погодження договору: якщо всі погодили - погоджено, інакше - ні.

- [ ] Переривання погодження договору по таймеру і його автопогодження — функціонал не потрібен.

- [ ] По завершенню погодження договору/специфікації документи (так само як при погодженні, в різних процесах) приходять на ознайомлення

- [ ] Учасники стадії ознайомлення читаються із `📘 Об'єкт конфігурації процесу` та/або об'єкту `📘 Тип і підстава договору` 

- [ ] Паралельно із ознайомленням ставиться задача на прикріплення оригіналу договору/специфікації

- [ ] Відповідальним за прикриплення оригіналу договору/специфікації є юрист, але відповідальний зчитується із `📘 Об'єкт конфігурації процесу` та/або об'єкту `📘 Тип і підстава договору` і може бути замінений наприклад на ініціатора процесу.

# Документ договору

- [ ] Назва документу договору виглядає так: `ДОГ 2409_0001✔️ КАФ -- КОНТРАГЕНТ` де:
	- `ДОГ` - тип документу
	- `2409_0001` — внутрішній номер документу
	- `✔️` — символ статусу документу (в даному випадку "Погоджено")
	- `КАФ` — внутрішній код нашої компанії
	- `КОНТРАГЕНТ` — коротка назва контрагента (якщо є, в іншому випадку - повна) безорганізаційно-правової форми
- [ ] Документ договору містить серед інших наступні поля (🔎 - поля по яким можливий пошук):
	- 🔎 `Назва документу`
	- 🔎 `Ініціатор документу`
	- 🔎 `Відповідальний юрист`
	- 🔎 `Номер документу внутрішній` — задається автоматично
	- 🔎 `Номер документу зовнішній` — задається юристом
	- 🔎 `Діє до` (дата/час) — може бути пустою для втутрішніх договорів, для зовнішніх рік з
	- 🔎 `Статус документу` — `🎲 Чернетка`, `🎲 На погодженні`, `🎲Не погоджено`, `🎲 Погоджено`, `🎲 Не дійсний`
	- 🔎 `Наша компанія`
	- 🔎 `Контрагент`
	- 🔎 `Реєстраційний код контрагента` (ЕДРПО, ІНН, тощо)
	- 🔎 `Предмет договору`
	- 🔎 `Тип договору` — Внутрішній, Продажі, Закупки, Кредити 
	- `Пов'язані специфікації` (список)
	- `Задача юристу` — Об'єкт задачі юристу 
	- `Тип договору`
	- `Підстава договору`
	- `Документ підстави договору` — Службова записка, Тендер, Ручний тендер, тощо.
- [ ] Під час вибору користувачами документу договору (десь в інших процесах) фільтруватидокументи договорів по:
	- `Діє до` — більше поточної дати (якщо не пусто)
	- `Наша компанія` — тільки по вказаній нашій компанії (якщо вказано)
	- `Статус документу` — дорівнює `Погоджено` 

# Учасники погодження/ознайомлення з договором

Учасники погодження / ознайомлення беруться з таблиці `Учасники процесу основні` та додаються або ж виключаються у відповідності до таблиці `Учасники процесу додаткові`

## Учасники процесу основні
| > ...грн | Учасники | Примітки |
| ---: | :--- | :--- |
|------| ◤ Погодження |------|
|     0|         Керівник ЦФВ ініціатора |  |
|     0|         Керівник Департаменту ініціатора |  |
|     0|         Гол. бухг. підр. |  |
|     0|         ❓ Керівник підприємства | ❓ є тільки до 10_000, так треба? |
|10_000|         Керівник ЦФВ бухгалтерія |  |
|10_000|         Фін. директор |  |
|10_000|         Керівник юридичного департаменту |  |
|------| ◤ Ознайомлення |------|
|     0|         Ініціатор договору |  |
|     0|         Економіст підприємства |  |
|     0|         Гол. бухг. підр. |  |
|10_000|         Керівник підприємства |  |
|10_000|         Керівник комерційного департаменту |  |

## Учасники процесу додаткові (✔️ додати / ❌виключити)

| Тип та `підстава` / учасники | Примітки |
| --- | --- |
| ■ Продаж зерна `Паспорт угоди / Службова записка` |  |
|    ◤ Погодження |  |
|            ✔️ Керівник департаменту доробки і зберігання зерна |  |
|            ✔️ Керівник ЦФВ Лабораторія |  |
|    ◤ Ознайомлення |  |
|            --- |  |
| ■ Продаж інше `Службова записка` | --- |
|    ◤ Погодження |  |
|            --- |  |
|    ◤ Ознайомлення |  |
|            ❌ Керівник комерційного департаменту |  |
|            ❌ Економіст підприємства |  |
| ■ Закупка `По ліміту ЦФВ` | --- |
|    ◤ Погодження |  |
|            --- |  |
|    ◤ Ознайомлення |  |
|            ❌ Керівник комерційного департаменту |  |
| ■ Закупка `Служб. зап. по тривозі` | --- |
|    ◤ Погодження |  |
|            ✔️ Керівник Комерційного департаменту |  |
|    ◤ Ознайомлення |  |
|            --- |  |
| ■ Закупка `Тендер / Тендер ручний` | --- |
|    ◤ Погодження |  |
|            ✔️ Керівник Комерційного департаменту |  |
|    ◤ Ознайомлення |  |
|            --- |  |
| ■ Кредитний `БЕЗ ПІДСТАВИ` | --- |
|    ◤ Погодження |  |
|            --- |  |
|    ◤ Ознайомлення |  |
|            ❌ Керівник комерційного департаменту |  |
|            ❌ Економіст підприємства |  |


## Діаграма процесу
***



## Об'єкт конфігурації процесу
Цей довідник являє собою налаштування, що будуть використані в ході перебігу процесу,

НАЙМЕНУВАННЯ `Строка` - Відображувана назва об'єкта. Складається з актуальності та назви.  
UUID `Уникальный идентификатор (GUID)` - ключ по якому об'єкт "кріпиться" до процесу   
Актуальність `🎲 Актуальність`  
Назва `Строка`  
Примітки `Строка`  
📦 Учасники  процесу `Блок`  
   Актуальність `🎲 Актуальність`  
   🔑 Тип і підстава договору `📘 Тип і підстава договору (об'єкт)` - ключ  
   Примітки `Строка`  
   Учасники процесу `Блок` - по вказаному ключу  
       № п.п `Целое число` - Номер по якуму сортуються записи в цьому блоці  
       📥 Задача процесса `🎲 Задача процесу` - Перелік, що вказує на конкретну задачу в цьому процесі  
       😎 Тип виконавця задачі `🎲 Тип виконавця задачі` - Вказує на те який алгоритм використовувати для отримання виконавця, та джерело звідки його брати (Ініціатор процесу; Користувач; Співробітник; Функціональна роль; Керівник ЦФВ, Керівник департаменту, Керівник напрямку)  
       Стадія `Целое число` - № стадії де використовується виконавець (якщо декілька виконавців з однаковою стадією - паралельне виконання)  
       👤 Вага `Целое число` - ваговий коєф. який має рішення користувача (користувачі з меншим коєф не впливають на результуюче рішення)  
       👤 Користувач `Пользователь (Объект)` - Виконавець береться з цього поля, якщо тип виконавця задачі Користувач  
       👤 Співробітник `Элемент оргструктуры (Объект)` - Виконавець береться з цього поля, якщо тип виконавця задачі Співробітник    
       👤 Виконавець ролі по нашій компанії `📘 Роль в нашій компанії (Объект)` - Виконавець береться з цього поля, якщо тип виконавця задачі Функціональна роль    
       ✔️ Назва умови `Строка` - Назва умови, що використовується для прийняття рішення чи буде використовуватись виконавець; це унікальна назва, що є ключем на блок Умови   
       Примітки `Строка`  
       UUID `Уникальный идентификатор (GUID)`  
📦 Умови `Блок` - Блок в якому містяться параметри для умови за якою приймається рішення про участь в задачі її виконавця 
   Назва умови `Строка` - ключ що співпадає із значенням поля Назва умови в блоці 📦 Учасники  процесу  
   Призначення `Строка` - короткий опис для чого застосовується умова   
   Опис `Строка` - короткий опис як працює алгоритм, що використовує цю умову  
   📦 Параметри `Блок` - параметри, що використовуються при обчисленні умови  
       Назва `Строка` - Ключ, що містить назву параметру умови  
       Значення `Строка` - значення параметру  
       Опис `Строка` - опис параметру  

